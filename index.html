<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UltraNítido - Upscale de Imagens com WebGL</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0 40px 0;
            background: linear-gradient(135deg, #23c46c 0%, #1a9552 100%);
            color: white;
            margin-bottom: 30px;
        }
        
        .logo {
            max-width: 450px; /* Ajustado para 450px conforme solicitado */
            height: auto;
            margin: 0 auto 20px auto;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .logo:hover {
            transform: scale(1.05);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .upload-area {
            background: white;
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #23c46c;
            background: #f0fdf4;
        }
        
        .upload-area.dragover {
            border-color: #23c46c;
            background: #e6f9ef;
        }
        
        .options {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .option-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        select, input[type="number"], input[type="range"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        input[type="range"] {
            padding: 0;
            height: 40px;
        }
        
        .slider-value {
            text-align: right;
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .btn {
            background: #23c46c;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 5px #23c46c; }
            50% { box-shadow: 0 0 20px #23c46c; }
            100% { box-shadow: 0 0 5px #23c46c; }
        }
        
        .btn:hover {
            background: #1a9552;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            animation: none;
        }
        
        .preview-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .preview-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .preview-box h3 {
            margin-bottom: 15px;
            color: #444;
        }
        
        .preview-box img {
            max-width: 100%;
            border-radius: 5px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #23c46c;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .info-box {
            background: #e0f2e9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #23c46c;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-box a {
            color: #23c46c;
            text-decoration: none;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .info-box a:hover {
            text-decoration: underline;
        }
        
        .instagram-icon {
            width: 20px;
            height: 20px;
            fill: #23c46c;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        #downloadBtn {
            display: none;
            margin-top: 20px;
        }
        
        canvas {
            display: none;
        }
        
        @media (max-width: 768px) {
            .preview-area {
                grid-template-columns: 1fr;
            }
            
            header {
                padding: 20px 0;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .upload-area {
                padding: 20px;
            }
            
            .logo {
                max-width: 150px;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="https://www.instagram.com/marcossvinx/" target="_blank" class="logo">
            <svg id="Camada_1" data-name="Camada 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 344.82 174.91">
              <defs>
                <style>
                  .cls-1 {
                    fill: #fff;
                  }

                  .cls-2 {
                    fill: #23c46c;
                  }
                </style>
              </defs>
              <rect class="cls-2" width="344.82" height="174.91" rx="33.62" ry="33.62"/>
              <g>
                <g>
                  <g>
                    <path class="cls-1" d="M42.53,78.9V21.94h25.13c11.15,0,18.27,8.15,18.27,18.44s-7.12,17.84-18.27,17.84h-13.21v20.67h-11.92ZM65.78,48.53c6.86,0,9.69-3.52,9.69-8.49,0-4.72-2.83-8.23-9.69-8.23h-11.32v16.73h11.32Z"/>
                    <path class="cls-1" d="M88.6,78.9v-42.2h10.46v5.06c3.69-5.66,7.98-6.18,12.52-6.18h1.46v11.41c-1.03-.17-2.06-.26-3.09-.26-6.86,0-10.21,3.43-10.21,10.21v21.96h-11.15Z"/>
                    <path class="cls-1" d="M209.29,78.9v-25.56c0-5.06-2.66-8.66-6.6-8.66s-7.12,3.86-7.12,9.01v25.22h-11.15v-25.39c0-6.78-1.8-8.49-6.69-8.49-4.46,0-6.78,2.74-6.78,8.23v25.65h-11.15v-42.2h10.46v6.18c2.83-5.58,6.78-7.29,12.35-7.29s8.49,1.8,11.75,6.69c2.32-4.63,6.09-6.69,11.41-6.69,8.49,0,14.41,6.18,14.41,14.07v29.25h-10.89Z"/>
                    <path class="cls-1" d="M224.48,98.88v-62.19h10.72l.09,5.15c2.66-4.29,6.61-6.26,11.75-6.26,10.64,0,18.27,8.41,18.27,22.65,0,12.78-6.43,21.79-17.33,21.79-5.23,0-9.35-2.14-12.52-6.61v25.48h-10.98ZM253.98,57.45c0-7.55-3.95-12.78-9.52-12.78s-9.44,4.98-9.44,12.1c0,9.18,3.17,13.72,9.35,13.72,6.52,0,9.61-4.37,9.61-13.04Z"/>
                    <path class="cls-1" d="M293.27,51.11h10.38v12.01c0,8.92-5.15,16.9-17.07,16.9s-17.24-7.89-17.24-16.98V25.29h10.98v11.41h23.33v7.89h-23.33v17.33c0,5.32,1.89,8.41,6.43,8.41s6.52-3,6.52-8.23v-10.98Z"/>
                  </g>
                  <g>
                    <path class="cls-1" d="M84.3,130.58c-4.82,13.47-15.43,22.39-28.81,22.39s-22.03-8.47-22.03-24.35c0-22.92,13.83-38.89,33.36-38.89,13.65,0,21.05,8.47,21.05,19.53,0,.62-.09,1.25-.09,1.87h-9.54c0-.62.09-1.16.09-1.69,0-8.39-5-11.42-12.84-11.42-14.36,0-22.21,12.84-22.21,29.52,0,12.31,4.73,17.13,13.38,17.13,9.37,0,15.25-5.35,18.11-14.09h9.54Z"/>
                    <path class="cls-1" d="M97.41,131.21c-.09.89-.09,1.87-.09,2.77,0,8.21,3.57,11.06,9.99,11.06,4.73,0,9.19-2.59,11.15-7.05h9.28c-4.19,9.01-12.13,14.09-21.32,14.09-11.95,0-17.93-6.15-17.93-18.02,0-17.84,10.88-28.19,25.42-28.19,10.79,0,16.32,6.15,16.32,17.48,0,2.41-.27,5-.71,7.85h-32.11ZM121.32,125.5c.18-1.43.27-2.68.27-3.75,0-6.96-3.84-8.74-9.19-8.74-6.78,0-12.13,4.28-14.18,12.49h23.1Z"/>
                    <path class="cls-1" d="M132.74,150.92l7.76-43.89h8.38l-1.43,7.85c4.82-7.49,10.7-9.01,16.06-9.01h1.96l-1.61,9.19c-.98-.18-2.05-.27-3.21-.27-8.65,0-13.56,5.53-14.98,13.56l-4.01,22.57h-8.92Z"/>
                    <path class="cls-1" d="M195.08,122.02h8.3l-2.23,12.49c-1.69,9.28-8.21,17.57-20.34,17.57-10.61,0-14.81-5.89-14.81-13.47,0-1.34.18-2.77.45-4.19l6.87-39.25h8.83l-2.05,11.86h25.96l-1.16,6.42h-25.96l-3.57,20.16c-.27,1.52-.36,2.77-.36,3.92,0,4.82,2.23,6.78,7.31,6.78,5.98,0,9.54-4.28,10.7-10.61l2.05-11.69Z"/>
                  </g>
                  <g>
                    <rect class="cls-1" x="236.07" y="74.19" width="43.68" height="106.92" rx="14.61" ry="14.61" transform="translate(130.26 385.56) rotate(-90)"/>
                    <g>
                      <path class="cls-1" d="M276.72,125.01l5.46-1.43c3.01-.79,5.36-3.14,6.14-6.14l1.43-5.46,1.43,5.46c.79,3.01,3.14,5.36,6.14,6.14l5.46,1.43-5.46,1.43c-3.01.79-5.36,3.14-6.14,6.14l-1.43,5.46-1.43-5.46c-.79-3.01-3.14-5.36-6.14-6.14l-5.46-1.43Z"/>
                      <path class="cls-1" d="M273.7,136.61l2.6-.68c1.43-.37,2.55-1.49,2.92-2.92l.68-2.6.68,2.6c.37,1.43,1.49,2.55,2.92,2.92l2.6.68-2.6,.68c-1.43.37-2.55,1.49-2.92,2.92l-.68,2.6-.68-2.6c-.37-1.43-1.49-2.55-2.92-2.92l-2.6-.68Z"/>
                      <path class="cls-1" d="M266.56,129.39l1.81-.47c1-.26,1.77-1.04,2.03-2.03l.47-1.81.47,1.81c.26,1,1.04,1.77,2.03,2.03l1.81,.47-1.81,.47c-1,.26-1.77,1.04-2.03,2.03l-.47,1.81-.47-1.81c-.26-1-1.04-1.77-2.03-2.03l-1.81-.47Z"/>
                    </g>
                    <circle class="cls-1" cx="226.57" cy="127.65" r="15.67"/>
                  </g>
                </g>
                <path class="cls-1" d="M153.79,45.28c.88,1.39,1.47,2.4,1.76,3.03,7.36,16.12-3.9,34.63-21.9,34.6-6.2-.01-13.49-2.68-17.61-7.7-.39-.48-.36-1.18.08-1.62l1.64-1.64c.33-.34.41-.85.17-1.26-.21-.38-.51-.87-.9-1.48-.88-1.39-1.46-2.4-1.75-3.03-7.36-16.12,3.9-34.62,21.9-34.6,6.2.01,13.49,2.68,17.61,7.7.39.48.36,1.18-.08,1.62l-1.64,1.64c-.33.34-.41.85-.17,1.26.21.38.51.87.89,1.48ZM128.69,62.53c-.25.53-.81,1.11-1.69,1.74-.58.42-.71,1.23-.29,1.81.02.02.03.05.05.07,3.85,4.58,8.31,7.84,13.38,9.77,1.95.74,4.01.79,6.17.13.19-.06.37-.15.54-.26,4.62-3.06,2.43-10.42.42-14.6-1.39-2.9-3.06-5.57-5-8.01-.4-.5-.36-1.22.1-1.68l1.63-1.62c.42-.42.44-1.08.06-1.53-3.08-3.64-6.62-6.5-10.6-8.59-3.32-1.74-8.23-3.08-10.88.11-2.38,2.87-1.22,8.19.1,11.47,1.4,3.49,3.36,6.82,5.87,9.99.27.34.32.8.14,1.19Z"/>
              </g>
            </svg>
        </a>
        <h1>UltraNítido</h1>
        <p class="subtitle">Aumenta qualidade de suas imagens para 4K com tecnologia avançada - Grátis!</p>
    </header>
    
    <div class="container">
        <div class="info-box">
            <p>Este é um projeto feito por:</p>
            <a href="https://www.instagram.com/marcossvinx/" target="_blank">
                <svg class="instagram-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
                @marcossvinx
            </a>
            <span>para comunidade Prompt Certo</span>
        </div>
        
        <div class="upload-area" id="dropZone">
            <input type="file" id="fileInput" accept="image/*" style="display: none">
            <h3>Arraste uma imagem aqui</h3>
            <p>ou clique para selecionar</p>
            <p style="font-size: 0.9em; color: #666; margin-top: 10px">Formatos: JPG, PNG, WebP</p>
        </div>
        
        <div class="options">
            <div class="option-group">
                <label>Método de Upscale:</label>
                <select id="upscaleMethod">
                    <option value="lanczos">Lanczos (Alta Qualidade)</option>
                    <option value="bicubic" selected>Bicúbico (4K)</option>
                    <option value="xbr">Super-xBR (Nitidez Máxima)</option>
                </select>
            </div>
            
            <div class="option-group">
                <label>Fator de Escala:</label>
                <select id="scaleFactor">
                    <option value="2">2x</option>
                    <option value="3">3x</option>
                    <option value="4" selected>4x</option>
                </select>
            </div>
            
            <div class="option-group">
                <label>Aprimoramento HDR:</label>
                <select id="hdrEnhance">
                    <option value="low">Baixo</option>
                    <option value="medium" selected>Médio</option>
                    <option value="high">Alto</option>
                </select>
            </div>
            
            <div class="option-group">
                <label>Nitidez: <span id="sharpnessValue">70%</span></label>
                <input type="range" id="sharpness" min="0" max="100" value="70">
            </div>
            
            <div class="option-group">
                <label>Brilho: <span id="brightnessValue">10</span></label>
                <input type="range" id="brightness" min="-50" max="50" value="10">
            </div>
            
            <div class="option-group">
                <label>Contraste: <span id="contrastValue">15</span></label>
                <input type="range" id="contrast" min="-50" max="50" value="15">
            </div>
            
            <div class="option-group">
                <label>Saturação: <span id="saturationValue">15</span></label>
                <input type="range" id="saturation" min="-50" max="50" value="15">
            </div>
            
            <button class="btn" id="processBtn" disabled>Processar Imagem</button>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Processando imagem em 4K...</p>
        </div>
        
        <div class="preview-area" id="previewArea" style="display: none;">
            <div class="preview-box">
                <h3>Original</h3>
                <img id="originalPreview">
                <p id="originalInfo"></p>
            </div>
            <div class="preview-box">
                <h3>Processada (Qualidade 4K)</h3>
                <img id="processedPreview">
                <p id="processedInfo"></p>
            </div>
        </div>
        
        <button class="btn" id="downloadBtn">⬇️ Baixar Imagem em Qualidade 4K</button>
    </div>

    <!-- Shaders -->
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec2 a_position;
        attribute vec2 a_texCoord;
        
        uniform vec2 u_resolution;
        
        varying vec2 v_texCoord;
        
        void main() {
            // convert position from pixels to clip space
            vec2 zeroToOne = a_position / u_resolution;
            vec2 zeroToTwo = zeroToOne * 2.0;
            vec2 clipSpace = zeroToTwo - 1.0;
            
            gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
            v_texCoord = a_texCoord;
        }
    </script>
    
    <!-- Bicubic Shader -->
    <script id="bicubic-shader" type="x-shader/x-fragment">
        precision mediump float;
        
        uniform sampler2D u_image;
        uniform vec2 u_textureSize;
        uniform float u_sharpness;
        uniform float u_brightness;
        uniform float u_contrast;
        uniform float u_saturation;
        varying vec2 v_texCoord;
        
        // Bicubic weight function with adjustable sharpness
        float weight(float x, float sharpness) {
            float absx = abs(x);
            float absx2 = absx * absx;
            float absx3 = absx2 * absx;
            
            float w = 0.0;
            
            // Mitchell-Netravali filter with adjustable sharpness
            float B = 0.333 * sharpness;
            float C = 0.333 * sharpness;
            
            if (absx < 1.0) {
                w = ((12.0 - 9.0 * B - 6.0 * C) * absx3 + (-18.0 + 12.0 * B + 6.0 * C) * absx2 + (6.0 - 2.0 * B)) / 6.0;
            } else if (absx < 2.0) {
                w = ((-B - 6.0 * C) * absx3 + (6.0 * B + 30.0 * C) * absx2 + (-12.0 * B - 48.0 * C) * absx + (8.0 * B + 24.0 * C)) / 6.0;
            }
            
            return w;
        }
        
        // RGB to HSL conversion
        vec3 rgb2hsl(vec3 color) {
            float maxColor = max(max(color.r, color.g), color.b);
            float minColor = min(min(color.r, color.g), color.b);
            float delta = maxColor - minColor;
            
            float h = 0.0;
            float s = 0.0;
            float l = (maxColor + minColor) / 2.0;
            
            if (delta > 0.0) {
                s = l < 0.5 ? delta / (maxColor + minColor) : delta / (2.0 - maxColor - minColor);
                
                if (maxColor == color.r) {
                    h = (color.g - color.b) / delta + (color.g < color.b ? 6.0 : 0.0);
                } else if (maxColor == color.g) {
                    h = (color.b - color.r) / delta + 2.0;
                } else {
                    h = (color.r - color.g) / delta + 4.0;
                }
                h /= 6.0;
            }
